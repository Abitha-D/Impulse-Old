@{
    Layout = null;
}

@Scripts.Render("~/bundles/icore_js")
@*@Scripts.Render("~/bundles/icore_js_ie")*@
@Scripts.Render("~/bundles/icore_app_js")

@model BussinessLayer.Common.LoginDetails

<!DOCTYPE html>

<html lang="en">
<!--<![endif]-->
<!-- BEGIN HEAD -->
<head>
    <meta charset="utf-8" />
    <title>Impulse</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta content="width=device-width, initial-scale=1" name="viewport" />
    <meta content="" name="description" />
    <meta content="" name="author" />
    <link href="http://fonts.googleapis.com/css?family=Open+Sans:400,300,600,700&subset=all" rel="stylesheet" type="text/css" />
    <link href="~/assets/global/plugins/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css" />
    <link href="~/assets/global/plugins/simple-line-icons/simple-line-icons.min.css" rel="stylesheet" type="text/css" />
    <link href="~/assets/global/plugins/bootstrap/css/bootstrap.min.css" rel="stylesheet" type="text/css" />
    <link href="~/assets/global/plugins/bootstrap-switch/css/bootstrap-switch.min.css" rel="stylesheet" type="text/css" />
    <link href="~/assets/global/plugins/select2/css/select2.min.css" rel="stylesheet" type="text/css" />
    <link href="~/assets/global/plugins/select2/css/select2-bootstrap.min.css" rel="stylesheet" type="text/css" />
    <link href="~/assets/global/css/components.min.css" rel="stylesheet" id="style_components" type="text/css" />
    <link href="~/assets/global/css/plugins.min.css" rel="stylesheet" type="text/css" />
    <link href="~/assets/pages/css/login-5.min.css" rel="stylesheet" type="text/css" />
    <link rel="shortcut icon" href="~/Content/Image/loading_spinner.gif" />
</head>
<!-- END HEAD -->
<body class=" login">
    <!-- BEGIN : LOGIN PAGE 5-1 -->
    <div class=" user-login-5">
    <div class="row bs-reset">
        <div class="col-md-6 bs-reset">
            <div class="login-bg" style="background-image: url(impulse/assets/pages/img/login/bg1.jpg)">

            </div>
        </div>
        <div class="col-md-6 login-container bs-reset">
            <div class="login-content">
                <center><img src="~/assets/layouts/layout3/img/impulse1.png" alt=" logo" class="logo-default" style="width: 280px;height:150px;margin-top: -2px;"></center>
                <h1>ECESIS </h1>
                <p>Please Login here to apply Leaves, and track your Payroll and update your personal details.</p>
                
                @using (Html.BeginForm("Index", "Home", FormMethod.Post, new { name = "frm", id = "frm" }))
                {
                    <form action="javascript:;" class="login-form" method="post">
                        @*action=""*@
                        <div class="row">
                            <div class="col-xs-6">
                                @Html.TextBoxFor(a => a.User, new { @class = "form-control form-control-solid placeholder-no-fix form-group", type = "text", placeholder = "Username", autocomplete = "off", required = "" })
                            </div>
                            <div class="col-xs-6">
                                @Html.PasswordFor(a => a.Password, new { @class = "form-control form-control-solid placeholder-no-fix form-group", placeholder = "Password", autocomplete = "off", required = "" })
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-4">
                            </div>
                            <div class="col-sm-8 text-right">
                                <div class="forgot-password">
                                    <a href="~/Employee/ForgotPassword" class="forget-password" onclick="newuser()">Forgot password?</a>
                                    &nbsp;&nbsp;
                                    <button class="btn green" type="submit" onclick="encode64(this.value)">Sign In</button>
                                </div>
                            </div>
                        </div>
                        @*<div class="form-group">

                            </div>*@




                        <div style="display:none">
                            <input type="text" name="newuser" id="newuser" />
                            <input type="text" name="newpwd" id="newpwd" />
                        </div>
                    </form>
                }
                <center>
                    <div style="color:red" id="errormsg">@ViewBag.Message</div>

                </center>
            </div>
            <div class="login-footer">
                <div class="row bs-reset">
                    <div class="col-xs-7 bs-reset">
                        <div class="login-copyright text-right">
                            <p>Copyright &copy; ECESIS BPO Services</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    </div>

    <script src="~/assets/global/plugins/jquery.min.js" type="text/javascript"></script>
    <script src="~/assets/global/plugins/bootstrap/js/bootstrap.min.js" type="text/javascript"></script>
    <script src="~/assets/global/plugins/js.cookie.min.js" type="text/javascript"></script>
    <script src="~/assets/global/plugins/bootstrap-hover-dropdown/bootstrap-hover-dropdown.min.js" type="text/javascript"></script>
    <script src="~/assets/global/plugins/jquery-slimscroll/jquery.slimscroll.min.js" type="text/javascript"></script>
    <script src="~/assets/global/plugins/jquery.blockui.min.js" type="text/javascript"></script>
    <script src="~/assets/global/plugins/bootstrap-switch/js/bootstrap-switch.min.js" type="text/javascript"></script>
    <script src="~/assets/global/plugins/jquery-validation/js/jquery.validate.min.js" type="text/javascript"></script>
    <script src="~/assets/global/plugins/jquery-validation/js/additional-methods.min.js" type="text/javascript"></script>
    <script src="~/assets/global/plugins/select2/js/select2.full.min.js" type="text/javascript"></script>
    <script src="~/assets/global/plugins/backstretch/jquery.backstretch.min.js" type="text/javascript"></script>
    <script src="~/assets/global/scripts/app.min.js" type="text/javascript"></script>
    <script src="~/assets/pages/scripts/login-5.min.js" type="text/javascript"></script>
    <!-- END PAGE LEVEL SCRIPTS -->
    <!-- BEGIN THEME LAYOUT SCRIPTS -->
    <!-- END THEME LAYOUT SCRIPTS -->
</body>

<script>


    function newuser() {
        $('#newuser').attr('autocomplete', 'false');
        $('#newpwd').attr('autocomplete', 'false');
        //UserPassword
        $('#newuser').addClass("hide1");
        $('#newpwd').addClass("hide1");

        $('#newuser').val("$login$user$");
        $('#newpwd').val("admin")
        var id = $('#frm').value;
        newencode64(id);
        $("#frm").submit();
    }
    var END_OF_INPUT = -1;
    var uname = null;
    var pword = null;
    function disableBack() { window.history.forward() }

    $(document).ready(function () {

        if (localStorage.getItem("islogin") == "on" && localStorage.getItem("cu") != null) {

            var url = '@Url.Action("ApplicationHome", "Home")';
            window.location.href = url;

        }
        $(window).load(function () {
            $('#User').value = "";
            $('#Password').vaue = "";
            $('#newuser').value = "";
            $('#newpwd').vaue = "";

        });
        
    });
    function setBase64Str(str) {
        base64Str = str;
        base64Count = 0;
    }

    function encode64(str) {
        var str = $('#Password').val();

        setBase64Str(str);
        var result = '';
        var inBuffer = new Array(3);
        var lineCount = 0;
        var done = false;
        while (!done && (inBuffer[0] = readBase64()) != END_OF_INPUT) {
            inBuffer[1] = readBase64();
            inBuffer[2] = readBase64();
            result += (base64Chars[inBuffer[0] >> 2]);
            if (inBuffer[1] != END_OF_INPUT) {
                result += (base64Chars[((inBuffer[0] << 4) & 0x30) | (inBuffer[1] >> 4)]);
                if (inBuffer[2] != END_OF_INPUT) {
                    result += (base64Chars[((inBuffer[1] << 2) & 0x3c) | (inBuffer[2] >> 6)]);
                    result += (base64Chars[inBuffer[2] & 0x3F]);
                } else {
                    result += (base64Chars[((inBuffer[1] << 2) & 0x3c)]);
                    result += ('=');
                    done = true;
                }
            } else {
                result += (base64Chars[((inBuffer[0] << 4) & 0x30)]);
                result += ('=');
                result += ('=');
                done = true;
            }
            lineCount += 4;
            if (lineCount >= 76) {
                result += ('\n');
                lineCount = 0;
            }
        }

        $('#Password').val(result);
        //$("#<%= HidBase64Password.ClientID %>").val(result);
        //var logout = TimeClockManagement();
        //            if (logout == false) {
        //                window.parent.location.href = 'login.aspx';
        //                return;
        //            }
        localStorage.setItem("loginpwd", result);
        return result;

    }
    function newencode64(str) {
        var str = $('#newpwd').val();
        setBase64Str(str);
        var result = '';
        var inBuffer = new Array(3);
        var lineCount = 0;
        var done = false;
        while (!done && (inBuffer[0] = readBase64()) != END_OF_INPUT) {
            inBuffer[1] = readBase64();
            inBuffer[2] = readBase64();
            result += (base64Chars[inBuffer[0] >> 2]);
            if (inBuffer[1] != END_OF_INPUT) {
                result += (base64Chars[((inBuffer[0] << 4) & 0x30) | (inBuffer[1] >> 4)]);
                if (inBuffer[2] != END_OF_INPUT) {
                    result += (base64Chars[((inBuffer[1] << 2) & 0x3c) | (inBuffer[2] >> 6)]);
                    result += (base64Chars[inBuffer[2] & 0x3F]);
                } else {
                    result += (base64Chars[((inBuffer[1] << 2) & 0x3c)]);
                    result += ('=');
                    done = true;
                }
            } else {
                result += (base64Chars[((inBuffer[0] << 4) & 0x30)]);
                result += ('=');
                result += ('=');
                done = true;
            }
            lineCount += 4;
            if (lineCount >= 76) {
                result += ('\n');
                lineCount = 0;
            }
        }

        $('#newpwd').val(result);
        //$("#<%= HidBase64Password.ClientID %>").val(result);
        //var logout = TimeClockManagement();
        //            if (logout == false) {
        //                window.parent.location.href = 'login.aspx';
        //                return;
        //            }

        return result;

    }


    var base64Chars = new Array(
        'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H',
        'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P',
        'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X',
        'Y', 'Z', 'a', 'b', 'c', 'd', 'e', 'f',
        'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n',
        'o', 'p', 'q', 'r', 's', 't', 'u', 'v',
        'w', 'x', 'y', 'z', '0', '1', '2', '3',
        '4', '5', '6', '7', '8', '9', '+', '/'
        );

    var reverseBase64Chars = new Array();

    for (var i = 0; i < base64Chars.length; i++) {
        reverseBase64Chars[base64Chars[i]] = i;
    }

    var base64Str;
    var base64Count;

    function setBase64Str(str) {
        base64Str = str;
        base64Count = 0;
    }

    function readBase64() {
        if (!base64Str) return END_OF_INPUT;
        if (base64Count >= base64Str.length) return END_OF_INPUT;
        var c = base64Str.charCodeAt(base64Count) & 0xff;
        base64Count++;
        return c;
    }



    function readReverseBase64() {

        if (!base64Str) return END_OF_INPUT;
        while (true) {
            if (base64Count >= base64Str.length) return END_OF_INPUT;
            var nextCharacter = base64Str.charAt(base64Count);
            base64Count++;
            if (reverseBase64Chars[nextCharacter]) {
                return reverseBase64Chars[nextCharacter];
            }
            if (nextCharacter == 'A') return 0;
        }
        return END_OF_INPUT;
    }

    function ntos(n) {

        n = n.toString(16);
        if (n.length == 1) n = "0" + n;
        n = "%" + n;
        return unescape(n);
    }

    function decodeBase64(str) {

        setBase64Str(str);
        var result = "";
        var inBuffer = new Array(4);
        var done = false;
        while (!done && (inBuffer[0] = readReverseBase64()) != END_OF_INPUT && (inBuffer[1] = readReverseBase64()) != END_OF_INPUT) {
            inBuffer[2] = readReverseBase64();
            inBuffer[3] = readReverseBase64();
            result += ntos((((inBuffer[0] << 2) & 0xff) | inBuffer[1] >> 4));
            if (inBuffer[2] != END_OF_INPUT) {
                result += ntos((((inBuffer[1] << 4) & 0xff) | inBuffer[2] >> 2));
                if (inBuffer[3] != END_OF_INPUT) {
                    result += ntos((((inBuffer[2] << 6) & 0xff) | inBuffer[3]));
                } else {
                    done = true;
                }
            } else {
                done = true;
            }
        }
        return result;
    }

</script>
</html>
