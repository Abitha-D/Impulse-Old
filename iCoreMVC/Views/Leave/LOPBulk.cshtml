@{
    ViewBag.Title = "Bulk LOP";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<html>
<head>
    <meta charset="utf-8" />
    <title>Bulk LOP</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta content="width=device-width, initial-scale=1" name="viewport" />
    <meta content="" name="description" />
    <meta content="" name="author" />
    <!-- BEGIN GLOBAL MANDATORY STYLES -->
    <link href="http://fonts.googleapis.com/css?family=Open+Sans:400,300,600,700&subset=all" rel="stylesheet" type="text/css" />
    <link href="~/assets/global/plugins/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css" />
    <link href="~/assets/global/plugins/simple-line-icons/simple-line-icons.min.css" rel="stylesheet" type="text/css" />
    <link href="~/assets/global/plugins/bootstrap/css/bootstrap.min.css" rel="stylesheet" type="text/css" />
    <link href="~/assets/global/plugins/bootstrap-switch/css/bootstrap-switch.min.css" rel="stylesheet" type="text/css" />
    <link href="~/assets/global/css/components.min.css" rel="stylesheet" id="style_components" type="text/css" />
    <link href="~/assets/global/css/plugins.min.css" rel="stylesheet" type="text/css" />
    <link href="~/assets/layouts/layout3/css/layout.min.css" rel="stylesheet" type="text/css" />
    <link href="~/assets/layouts/layout3/css/themes/default.min.css" rel="stylesheet" type="text/css" id="style_color" />
    <link href="~/assets/layouts/layout3/css/custom.min.css" rel="stylesheet" type="text/css" />
    <link rel="shortcut icon" href="favicon.ico" />

    <link href="~/assets/global/plugins/icheck/skins/all.css" rel="stylesheet" />

    <link href="~/assets/pages/css/NewStyle.css" rel="stylesheet" />

    <style>
        .stuck {
            width: 100%;
            z-index: 1;
            height: 50px;
        }

        .labelclass {
            color: #2679e0 !important;
        }

        .labelclass1 {
            color: black;
            margin-top: -15px;
        }

        .buttonClass {
            background: 0, 0;
            color: #040404;
            border-radius: 5px;
            height: 40px;
            text-align: center;
            border-color: #19ff00;
            font-weight: 600;
        }

            .buttonClass:hover {
                background-color: black;
                border-color: black;
                color: white;
            }

        .btns {
            min-width: 200px;
            width: fit-content;
            width: -moz-fit-content;
            background-color: white;
            height: 50px;
            font-family: "Open Sans", sans-serif;
            text-transform: uppercase;
            font-size: 14px;
            color: black;
            letter-spacing: 2.8px;
            font-weight: 700;
            line-height: 1.6;
            box-shadow: 0 15px 40px -10px rgba(0, 0, 0, 0.3);
            position: relative;
            transition: all 0.4s ease;
            cursor: pointer;
            display: -webkit-flex;
            display: flex;
            justify-content: center;
            align-items: center;
            text-align: center;
            border: 0;
            margin-top: 15px;
        }

            .btns span {
                z-index: 1;
                text-align: center;
            }

            .btns:before, .btns:after {
                content: "";
                position: absolute;
                width: 4px;
                height: 100%;
                top: 0;
                transition: all 0.4s ease;
                background-color: #3effeb;
            }

            .btns:before {
                left: 0;
            }

            .btns:after {
                right: 0;
            }

            .btns:hover {
                transition: all 0.4s ease;
                box-shadow: 0 8px 20px -12px rgba(0, 0, 0, 0.2);
                color: black;
            }

                .btns:hover:before, .btns:hover:after {
                    width: 51%;
                }

        .DropDownClass {
            background-color: #ffffff;
            opacity: 1;
            border: 1px solid #c2cad8;
            color: black;
            height: 30px;
        }

        .closer {
            margin-top: -25px;
            float: right;
            width: 25px;
            border-radius: 50%;
            border: 2px solid #237394;
            padding-left: 6px;
            padding-top: 3px;
            height: 25px;
            outline: 0;
            background: transparent;
            color: #237394;
        }
    </style>
</head>
<body class="page-container-bg-solid" ng-app="Leave" ng-cloak style="overflow:hidden;">
    <div ng-controller="LeaveController" ng-cloak ng-init="" id="controllerID">

        <center>
            <div class="form-group">
                <div class="col-md-12">
                    <div class="col-md-4"></div>
                    <div class="col-md-4">
                        <table>
                            <tr>
                                <td><label class="labelclass">Company</label></td>
                                <td>
                                    <select id="ddlCompany" class="DropDownClass" onchange="companyChange()">
                                    </select>
                                </td>
                            </tr>
                            <tr>
                                <td><label class="labelclass" style="margin-top: 35px;width: 200px;">Employee Name</label></td>
                                <td>
                                    @*<select class="DropDownClass" style="margin-top:30px;" id="ddlEmployee" ng-model="Employees"
                                            data-ng-options="SalaryScale as SalaryScale.scale_name for SalaryScale in ScaleList track by SalaryScale.sl_no | orderBy:'scale_name' ">

                                        <option value="0">--Select Salary Slab--</option>
                                    </select>*@
                                    <select class="DropDownClass" style="margin-top:30px;" id="ddlEmployee">
                                        <option value="0">--Select Employee--</option>
                                    </select>
                                    @*<select class="DropDownClass" style="margin-top:30px;" id="ddlEmployee" ng-model="Employees">
                                        <option ng-repeat="emp in Employees" value="{{emp.emp_ref_no}}">{{emp.emp_full_name}}</option>
                                    </select>*@
                                    @*<select id="ddlYear" class="DropDownClass" style="margin-top:30px;">
                                            <option value="2020">RAMKUMAR MARIAPPAN</option>
                                            <option value="2021">2021</option>
                                            <option value="2022">2022</option>
                                            <option value="2023">2023</option>
                                        </select>*@
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <label class="labelclass">Month</label>&nbsp;&nbsp;&nbsp;&nbsp;
                                    <select id="ddlMonth" class="DropDownClass" style="margin-top:30px;">
                                        <option value="0">Select Month</option>
                                        <option value="1">January</option>
                                        <option value="2">Febraury</option>
                                        <option value="3">March</option>
                                        <option value="4">April</option>
                                        <option value="5">May</option>
                                        <option value="6">June</option>
                                        <option value="7">July</option>
                                        <option value="8">August</option>
                                        <option value="9">September</option>
                                        <option value="10">October</option>
                                        <option value="11">November</option>
                                        <option value="12">December</option>
                                    </select>
                                </td>
                                <td>
                                    <label class="labelclass" style="margin-left: 30px;">Year</label>&nbsp;&nbsp;&nbsp;&nbsp;
                                    <select id="ddlYear" class="DropDownClass" style="margin-top:30px;">
                                        <option value="0">Select Year</option>
                                        <option value="2020">2020</option>
                                        <option value="2021">2021</option>
                                        <option value="2022">2022</option>
                                        <option value="2023">2023</option>
                                    </select>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <label class="labelclass" style="margin-top:30px;">LOP Days</label>&nbsp;&nbsp;
                                </td>
                                <td>
                                    <input type="text" id="txtLopDays" class="DropDownClass" style="margin-top:30px;" />
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <label class="labelclass" style="margin-top:30px;">Reason</label>&nbsp;&nbsp;
                                </td>
                                <td>
                                    <textarea id="txtReason" minlength="5" class="DropDownClass" style="margin-top:30px;width: 230px;height: 100px;"></textarea>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <center><button style="margin-top:30px;" class="btn green btn-outline" id="btnSearch" ng-click="saveLOP(refNo)">Save</button></center>
                                </td>
                                <td>
                                    <center><button style="margin-top:30px;" class="btn red btn-outline" id="btnSearch" onclick="PageReset()">Reset</button></center>
                                </td>
                            </tr>
                        </table>
                    </div>
                    <div class="col-md-4"></div>
                </div>
            </div>
        </center>

        <br /><br />

        
        <script src="~/assets/global/plugins/jquery.min.js" type="text/javascript"></script>
        <script src="~/assets/global/plugins/bootstrap/js/bootstrap.min.js" type="text/javascript"></script>
        <script src="~/assets/global/plugins/js.cookie.min.js" type="text/javascript"></script>
        <script src="~/assets/global/plugins/bootstrap-hover-dropdown/bootstrap-hover-dropdown.min.js" type="text/javascript"></script>
        <script src="~/assets/global/plugins/jquery-slimscroll/jquery.slimscroll.min.js" type="text/javascript"></script>
        <script src="~/assets/global/plugins/jquery.blockui.min.js" type="text/javascript"></script>
        <script src="~/assets/global/plugins/bootstrap-switch/js/bootstrap-switch.min.js" type="text/javascript"></script>
        <script src="~/assets/global/scripts/app.min.js" type="text/javascript"></script>
        <script src="~/assets/layouts/global/scripts/quick-sidebar.min.js" type="text/javascript"></script>
        <script src="~/assets/pages/scripts/components-date-time-pickers.min.js"></script>
        <script src="~/assets/pages/scripts/components-date-time-pickers.js"></script>.

    </div>
    <script>

        function searchWord(id)
        {
            var value = $(id).val().toLowerCase();
            $("#myContent tr").filter(function() {
                $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)
            });
        }

        var refNo, roleId;

        function doc_keyUp(e) {

            if (e.ctrlKey && e.keyCode == 81) {
                parent.UserLock();
            }
        }

        var oAPICall;

        function companyChange()
        {
            var company = $("#ddlCompany").val();

            if (company == 0) {
                msgalert("Error", "Please choose company", 3);
                return;
            }

            var paramNames = [], paramValues = [];

            paramNames.push('refNo');

            paramValues.push(refNo);

            paramNames.push('RoleId');

            paramValues.push(roleId);

            paramNames.push('type');

            paramValues.push(4);

            paramNames.push('companyId');

            paramValues.push(company);

            var strJsonDatas = eval({ strSessionID: '', ProcParameters: paramNames, ProcInputData: paramValues });

            var Result = oAPICall.SelectData(strJsonDatas, "SelectEmployeeDetailsByCompany");

            $('#ddlEmployee').empty().append();

            $('#ddlEmployee').append('<option value="0">--Select Employee--</option>');

            if (Result != "" && Result != null) {
                for (var i = 0; i < Result.length; i++) {

                    $('#ddlEmployee').append('<option value="' + Result[i]["emp_ref_no"] + '">' + Result[i]["emp_full_name"] + '</option>');

                }
            }
        }
        
        function PageReset()
        {
            $("#ddlCompany").val("0").change();

            $("#ddlMonth").val("0").change();

            $("#ddlYear").val("0").change();
            
            $('#ddlEmployee').empty().append();

            $('#ddlEmployee').append('<option value="0">--Select Employee--</option>');
                        
            $("#txtLopDays").val("");

            $("#txtReason").val("");
        }

        document.addEventListener('keyup', doc_keyUp, false);

        $(document).ready(function () {

            var sUserDetails = @Html.Raw(Json.Encode(@ViewBag.userDetails));

            refNo  = sUserDetails.EmployeeId;

            roleId  = sUserDetails.RoleId;

            oAPICall = new APICall();

            if(roleId == 1)
            {
                $('#ddlCompany').empty().append();

                $('#ddlCompany').append('<option value="0">Choose Company</option>');
                $('#ddlCompany').append('<option value="1">BPO TVM</option>');
                $('#ddlCompany').append('<option value="2">BPO NGL</option>');
                $('#ddlCompany').append('<option value="3">CARE</option>');
                $('#ddlCompany').append('<option value="4">Ecesis Engineering</option>');
            }
            else if(roleId == 9 || roleId == 10) //for BPO HR
            {                
                $('#ddlCompany').empty().append();

                $('#ddlCompany').append('<option value="0">Choose Company</option>');
                $('#ddlCompany').append('<option value="1">BPO TVM</option>');
                $('#ddlCompany').append('<option value="2">BPO NGL</option>');
                $('#ddlCompany').append('<option value="3">CARE</option>');    

            }
            else if(roleId == 27) //for Mechanical HR
            {

                $('#ddlCompany').empty().append();

                $('#ddlCompany').append('<option value="0">Choose Company</option>');
                $('#ddlCompany').append('<option value="4">Ecesis Engineering</option>');
            }
            
        });

    </script>
</body>
</html>
<script src="~/Scripts/js/angular.min.js"></script>

<script src="~/Scripts/AngularController/Leavecontroller.js"></script>
